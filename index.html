<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>3D FPS with Three.js</title>
<style>
  body { margin: 0; overflow: hidden; }
  canvas { display: block; }
</style>
</head>
<body>
<script src="https://unpkg.com/three@0.162.0/build/three.min.js"></script>
<script>
window.addEventListener('load', function(){

  // Scene
  const scene = new THREE.Scene();
  scene.background = new THREE.Color(0x87ceeb);

  // Camera
  const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
  camera.position.set(0, 1.6, 5);

  // Renderer
  const renderer = new THREE.WebGLRenderer({antialias:true});
  renderer.setSize(window.innerWidth, window.innerHeight);
  document.body.appendChild(renderer.domElement);

  // Floor
  const floorGeo = new THREE.PlaneGeometry(50,50);
  const floorMat = new THREE.MeshPhongMaterial({color:0x228B22});
  const floor = new THREE.Mesh(floorGeo,floorMat);
  floor.rotation.x = -Math.PI/2;
  scene.add(floor);

  // Cube
  const cubeGeo = new THREE.BoxGeometry();
  const cubeMat = new THREE.MeshPhongMaterial({color:0xff0000});
  const cube = new THREE.Mesh(cubeGeo,cubeMat);
  cube.position.set(0,0.5,0);
  scene.add(cube);

  // Lighting
  const light = new THREE.DirectionalLight(0xffffff,1);
  light.position.set(10,20,10);
  scene.add(light);
  scene.add(new THREE.AmbientLight(0x404040));

  // Mouse look
  let pitch = 0, yaw = 0;
  document.body.addEventListener('click',()=>{document.body.requestPointerLock();});
  document.addEventListener('pointerlockchange', ()=>{
      if(document.pointerLockElement === document.body){
          document.addEventListener('mousemove', onMouseMove, false);
      } else {
          document.removeEventListener('mousemove', onMouseMove, false);
      }
  });
  function onMouseMove(e){
      yaw -= e.movementX*0.002;
      pitch -= e.movementY*0.002;
      if(pitch > Math.PI/2) pitch=Math.PI/2;
      if(pitch < -Math.PI/2) pitch=-Math.PI/2;
  }

  // Movement
  let keys = {};
  document.addEventListener('keydown', e=>keys[e.key.toLowerCase()]=true);
  document.addEventListener('keyup', e=>keys[e.key.toLowerCase()]=false);
  const speed = 0.1;

  // Animation loop
  function animate(){
      requestAnimationFrame(animate);

      let dx=0, dz=0;
      if(keys['w']) { dx += Math.sin(yaw)*speed; dz += Math.cos(yaw)*speed; }
      if(keys['s']) { dx -= Math.sin(yaw)*speed; dz -= Math.cos(yaw)*speed; }
      if(keys['a']) { dx += Math.cos(yaw)*speed; dz -= Math.sin(yaw)*speed; }
      if(keys['d']) { dx -= Math.cos(yaw)*speed; dz += Math.sin(yaw)*speed; }

      camera.position.x += dx;
      camera.position.z += dz;

      camera.rotation.order = "YXZ";
      camera.rotation.y = yaw;
      camera.rotation.x = pitch;

      renderer.render(scene, camera);
  }
  animate();

  // Resize
  window.addEventListener('resize', ()=>{
      camera.aspect = window.innerWidth/window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
  });

});
</script>
</body>
</html>
